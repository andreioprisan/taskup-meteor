<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Routed Authentication</title>

</head>


<!-- Very simple HTML at the moment -->
<body>
    <!-- END Bootstrap modal -->
    {{> header}}

    <div id="wrap">
        <div class="container-fluid">
            <div class="row-fluid">
                <div id="main" class="span8 offset2">
                    {{renderPage}}
                </div>
            </div>
        </div>
        <div id="spacer"></div>
    </div>


    
</body>



<template name="header">
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container-fluid">
                <a class="brand" href="/">Routed Auth</a>
                <button data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar" type="button">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <div class="nav-collapse collapse">

                    <ul class="nav">
                        <li class="{{ TabActive 'home'}}"><a href="/">Home</a></li>
                        <li class="{{ TabActive 'about'}}"><a href="/static_pages/about">About Us</a></li>
                        <li class="{{ TabActive 'terms'}}"><a href="/static_pages/terms">Terms</a></li>
                    </ul>

                    {{#if currentUser }}

                        {{> loggedin_header}}

                    {{else}}
                    <ul class="nav pull-right">
                        <li class="{{ TabActive 'login'}}"><a href="/login">Login</a></li>
                        <li class="{{ TabActive 'signup'}}"><a href="/signup">Signup</a></li>
                    </ul>
                    {{/if}}

                </div>

            </div>
        </div>
    </div>
</template>


<!-- Static Pages -->
<template name="home">
    <div class="well">
        <h1>Welcome to SampleApp</h1>    
    </div>
</template>

<template name="about">
    <div class="content">
        <h3>About Us</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aspernatur minus nobis similique harum aliquid tempora ad! Rerum molestiae accusamus quod fuga dolorem omnis porro perferendis iusto sequi blanditiis. Similique dolore.</p>
    </div>
</template>

<template name="terms">
    <div class="content">
        <h3>Terms and Conditions</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aspernatur minus nobis similique harum aliquid tempora ad! Rerum molestiae accusamus quod fuga dolorem omnis porro perferendis iusto sequi blanditiis. Similique dolore.</p>
    </div>
</template>



<template name="loggedin_header">
    {{#if loggingIn}}
        <p class="pull-right"><strong>Logging In!</strong></p>
    {{else}}
        <ul class="nav pull-right">
            <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Welcome, {{ fullName }} <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="/users/{{ id }}/edit"><i class="icon-cog"></i> Edit Profile</a></li>
                    <li class="divider"></li>
                    <li><a href="/logout"><i class="icon-off"></i> Logout</a></li>
                </ul>
            </li>
        </ul>
    {{/if}}

</template>


<template name="viewProfile">
    {{#with user}}


        <div class="row-fluid">
            <div class="span10">
                <h3>Your Profile</h3>
            </div>
            <div class="span2 pull-right action">
                <a href="/users/{{_id}}/edit" class='btn btn-primary btn-block'>Edit Profile</a>
            </div>
        </div>

        <div class="spacer"></div>
        <hr>

    
        <table class="table">
            <tr>
                <th>First name: </th>
                <td>{{ profile.firstName}}</td>
            </tr>

            <tr>
                <th>Last name: </th>
                <td>{{ profile.lastName}}</td>
            </tr>

            <tr>
                <th>Username: </th>
                <td>{{ username}}</td>
            </tr>

            <tr>
                <th>Bio: </th>
                <td>{{ profile.bio}}</td>
            </tr>
        </table>
    {{/with}}
</template>


<template name="editProfile">
    {{#with user}}

    <div class="row-fluid">
        <div class="span10">
            <h3>Edit Profile</h3>
        </div>
        <div class="span2 pull-right action">
            <a href="/users/{{_id}}" class='btn btn-primary btn-block'>View Profile</a>
        </div>
    </div>

    <div class="spacer"></div>
    <hr>


    <form id="editProfileForm" name="editProfileForm">
        <div class="control-group">
            
            <div class="controls">
                <label>First name</label>
                <input id="firstName" class="span12" name="firstName" type="text" value="{{profile.firstName}}">
                 <div class="help-block muted">Must be alphanumerical at least 3 characters and no longer then 50</div>
            </div>
        </div>

        <div class="control-group">
            
            <div class="controls">
                <label>Last name</label>
                <input id="lastName" class="span12" name="lastName" type="text" value="{{profile.lastName}}">
                 <div class="help-block muted">Must be alphanumerical at least 3 characters and no longer then 50</div>
            </div>
        </div>

        <div class="control-group">
            <div class="controls">
                <label>Bio</label>
                <textarea class="span12" id="bio" name="bio" placeholder="Bio">{{profile.bio}}</textarea>
                 <div class="help-block muted">Tell us about yourself.</div>
            </div>
        </div>


        <div class="control-group">
            <div class="controls">
                <button type="submit" id="saveEdit" data-loading-text="Updating user..." class="btn btn-success btn-large">Update Profile</button>
            </div>
        </div>
    </form>

    {{/with}}

</template>

<!-- Login -->
<template name="login">
    
    <h3>
        Login to your account
        <p class="pull-right"><small>New user? <a href="/signup">Sign up now!</a></small></p>
    </h3>

    <hr>
    
    <form id="loginForm" name="loginForm" method="post">
        <div class="control-group">
            <div class="controls">
                <input class="span12" id="usernameLogin" name="usernameLogin" type="text" placeholder="username">

            </div>
        </div>
        <div class="control-group">
            <div class="controls">
                <input class="span12" id="passwordLogin" name="passwordLogin" type="password" placeholder="password">
            </div>
        </div>

        <button id="login" class="btn btn-success btn-large pull-right" type="submit" data-loading-text="Signing in...">Sign In</button>
    </form>

</template>



<!-- Signup -->
<template name="signup">
    <h3>
        Create a new account
        <p class="pull-right"><small>Already have an account? <a href="/login">Login</a></small></p>
    </h3>
    
    <hr>

    <form id="signupForm" name="signupForm" method="post">
        <div class="control-group">
            <div class="controls">  
                <input class="span12" id="usernameSignup" name="usernameSignup" type="text" placeholder="Choose a username">
                <div class="help-block muted">Must be alphanumerical at least 3 characters and no longer then 9</div>
            </div>
        </div>
        
        <div class="control-group">
            <div class="controls">
                <input class="span12" id="email" name="email" type="email" placeholder="Your email">
                <div class="help-block muted">An email confirmation will be sent</div>
            </div>
        </div>
        
        <div class="control-group">
            <div class="controls">
                <input id="passwordSignup" name="passwordSignup" class="span6" type="password" placeholder="Password">
                <input id="password_againSignup" name="password_againSignup" class="span6" type="password" placeholder="Retype your password">

                <div class="help-block muted">Make sure you type your password correctly</div>
            </div>
        </div>

        <div class="control-group">
            <div class="controls">
                <input id="firstName" name="firstName" class="span6" type="text" placeholder="First Name">
                <input id="lastName" name="lastName" class="span6" type="text" placeholder="Last Name">

                <div class="help-block muted">Tell us your full name</div>
            </div>
        </div>
        
        <button class="btn btn-success btn-large pull-right" type="submit" id="createUser" data-loading-text="Creating user...">Create Your Account</button>
    </form>
</template>
